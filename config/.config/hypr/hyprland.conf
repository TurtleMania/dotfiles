# TODO - item that must be done
# NOTE - item requiring further review
# PREF - item that can be pulled out into a form of settings

# TODO - create full categorization for this file
# TODO - review all documentation for each category and tag items appropriately
# TODO - split this file into different files based on created categories

#### Generated Configuration
# TODO: add PREF tags
source=~/.cache/wal/colors-hyprland.conf

#### User Configuration
# TODO: review this config
# Maybe make settings in quickshell allowing for selection there?
# TODO: add PREF tags
$terminal = kitty
$webBrowser = firefox
$systemStatus = [fullscreen] kitty -e btop

#### Hyprland Configuration
# TODO: split into visual configuration, input device configuration, and external configurations (xwayland, opengl, etc.)
# TODO: add PREF tags
general {
    border_size = 1
    gaps_in = 5
    gaps_out = 10
    float_gaps = 10
    gaps_workspaces = 0

    col.inactive_border = $color2
    col.active_border = $color11 45deg
    col.nogroup_border = $color2
    col.nogroup_border_active = $color11 45deg
    
    layout = dwindle

    no_focus_fallback = true
    resize_on_border = no
    #extend_border_grab_area = 15
    #hover_icon_on_border = false
    allow_tearing = false
    resize_corner = 1
    modal_parent_blocking = no
    #locale = en_US

    snap {
        enabled = no
        window_gap = 10
        monitor_gap = 10
        border_overlap = false
        respect_gaps = true
    }
}

decoration {
    rounding = 10
    rounding_power = 2

    active_opacity = 1.0
    inactive_opacity = 1.0
    fullscreen_opacity = 1.0
    dim_modal = true
    dim_inactive = false
    dim_strength = 0.2
    dim_special = 0.1
    #dim_around = 0.4
    #screen_shader = 
    border_part_of_window = true

    blur {
        # TODO: play around with more
        # NOTE: may be generated
        enabled = yes
        size = 3
        passes = 2
        ignore_opacity = true
        new_optimizations = true
        xray = yes
        noise = 0.0
        contrast = 1.0
        brightness = 1.0
        vibrancy = 1.0
        vibrancy_darkness = 0.0

        special = false
        popups = false
        #popups_ignorealpha = 0.2
        input_methods = false
        #input_methods_ignorealpha = 0.2
    }

    shadow {
        # TODO: play around with more
        # NOTE: may be generated
        enabled = yes
        range = 4
        render_power = 3
        sharp = false
        ignore_window = true
        color = rgba(1a1a1aee)
        #color_inactive = rgba(1a1a1aee)
        #offset = 5 5
    }
}

animations {
    enabled = yes
    workspace_wraparound = false

    # TODO: create usable, but pleasing animation curves
    animation = windows, 0
    animation = layers, 0
    animation = fade, 0
    animation = border, 0
    animation = borderangle, 0
    animation = workspaces, 0
    animation = zoomFactor, 0
    animation = monitorAdded, 0
}

input {
    # TODO: review what these are and maybe move to custom config file
    kb_model = 
    kb_layout = us
    kb_variant = 
    kb_options = caps:swapescape
    kb_rules = 
    kb_file = 

    numlock_by_default = no
    resolve_binds_by_sym = false
    repeat_rate = 25
    repeat_delay = 600

    sensitivity = 0
    accel_profile = 
    force_no_accel = false
    rotation = 0
    left_handed = no
    scroll_points = 
    scroll_method = 
    scroll_button = 0
    scroll_button_lock = 0
    scroll_factor = 1.0
    natural_scroll = no

    follow_mouse = yes
    follow_mouse_threshold = 0.0
    focus_on_close = yes
    mouse_refocus = true
    float_switch_override_focus = 1
    special_fallthrough = no
    off_window_axis_events = 0
    emulate_discrete_scroll = 1

    touchpad {
        disable_while_typing = true
        natural_scroll = false
        scroll_factor = 1.0
        middle_button_emulation = true
        tap_button_map = lrm
        clickfinger_behavior = true
        tap-to-click = true
        drag_lock = 0
        tap-and-drag = true
        flip_x = false
        flip_y = false
        drag_3fg = 0
    }

    touchdevice {
        transform = -1
        output = [[Auto]]
        enabled = yes
    }

    virtualkeyboard {
        share_states = 0
        release_pressed_on_close = true
    }

    tablet {
        transform = -1
        output = 
        region_position = 0 0
        absolute_region_position = false
        region_size = 0 0
        relative_input = false
        left_handed = false
        active_area_size = 0 0
        active_area_position = 0 0
    }
}

# TODO: move this to a custom config file
devices {
}

gestures {
    # TODO: review what these are and maybe move to custom config file
    workspace_swipe_distance = 300
    workspace_swipe_touch = true
    workspace_swipe_invert = true
    workspace_swipe_touch_invert = true
    workspace_swipe_min_speed_to_force = 30
    workspace_swipe_cancel_ratio = 0.5
    workspace_swipe_create_new = true
    workspace_swipe_direction_lock = true
    workspace_swipe_direction_lock_threshold = 10
    workspace_swipe_forever = false
    workspace_swipe_use_r = false
    close_max_timeout = 1000
}

group {
    # TODO: review what hyprland groups are and review this config
    auto_group = false
    insert_after_current = true
    focus_removed_window = true
    drag_into_group = 1
    merge_groups_on_drag = true
    merge_groups_on_groupbar = true
    merge_floated_into_tiled_on_groupbar = false
    group_on_movetoworkspace = false
    col.border_active = $color1
    col.border_inactive = $color12
    col.border_locked_active = $color1
    col.border_locked_inactive = $color12
    groupbar {
        enabled = true
        font_family = 
        font_size = 8
        font_weight_active = normal
        font_weight_inactive = normal
        gradients = false
        height = 14
        indicator_gap = 0
        indicator_height = 3
        stacked = false
        priority = 3
        render_titles = true
        text_offset = 0
        scrolling = true
        rounding = 1
        rounding_power = 2.0
        gradient_rounding = 2
        gradient_rounding_power = 2.0
        round_only_edges = true
        gradient_round_only_edges = true
        text_color = $foreground
        #text_color_inactive = $foreground
        #text_color_locked_active = $foreground
        #text_color_locked_inactive = $foreground
        col.active = $color10
        col.inactive = $color3
        col.locked_active = $color10
        col.locked_inactive = $color10
        gaps_in = 2
        gaps_out = 2
        keep_upper_gap = true
        blur = false
    }
}

misc {
    # TODO: review this config
    disable_hyprland_logo = false
    disable_splash_rendering = true
    disable_scale_notification = false
    col.splash = 0xffffffff
    font_family = Sans
    #splash_font_family = Sans
    force_default_wallpaper = 1

    vfr = true
    vrr = 3
    mouse_move_enables_dpms = false
    key_press_enables_dpms = false

    name_vk_after_proc = true
    always_follow_on_dnd = true
    layers_hog_keyboard_focus = true
    animate_manual_resizes = false
    animate_mouse_windowdragging = false
    disable_autoreload = false

    enable_swallow = false
    swallow_regex = 
    swallow_exception_regex = 

    focus_on_activate = false
    mouse_move_focuses_monitor = true
    allow_session_lock_restore = false
    session_lock_xray = false
    background_color = $background
    close_special_on_empty = true
    on_focus_under_fullscreen = 2
    exit_window_retains_fullscreen = false
    initial_workspace_tracking = 1

    middle_click_paste = false
    render_unfocused_fps = 15
    disable_xdg_env_checks = false
    #disable_hyprland_qtutils_check = false # NOTE: Option gives an error despite being documented (https://wiki.hypr.land/Configuring/Variables/#binds:~:text=disable%5Fhyprland%5Fqtutils%5Fcheck)
    lockdead_screen_delay = 1000
    enable_anr_dialog = true
    anr_missed_pings = 5
    size_limits_tiled = false
    disable_watchdog_warning = false
}

binds {
    # TODO: review this config
    pass_mouse_when_bound = false
    scroll_event_delay = 300
    workspace_back_and_forth = false
    hide_special_on_workspace_change = true
    allow_workspace_cycles = false
    workspace_center_on = 1
    focus_preferred_method = 1
    ignore_group_lock = false
    movefocus_cycles_fullscreen = true
    movefocus_cycles_groupfirst = false
    disable_keybind_grabbing = false
    window_direction_monitor_fallback = true
    allow_pin_fullscreen = false
    drag_threshold = 0
}

xwayland {
    # TODO: review this config
    enabled = yes
    use_nearest_neighbor = true
    force_zero_scaling = false
    create_abstract_socket = false
}

opengl {
    # TODO: review this config
    nvidia_anti_flicker = true
}

render {
    # TODO: review this config
    direct_scanout = 0
    expand_undersized_textures = true
    xp_mode = false
    ctm_animation = 2
    cm_fs_passthrough = 2
    cm_enabled = true
    send_content_type = true
    cm_auto_hdr = 1
    new_render_scheduling = false
    non_shader_cm = 3
    cm_sdr_eotf = 0
}

cursor {
    # TODO: review this config
    invisible = false
    sync_gsettings_theme = true
    no_hardware_cursors = 2
    no_break_fs_vrr = 2
    min_refresh_rate = 24
    hotspot_padding = 1
    inactive_timeout = 3
    no_warps = false
    persistent_warps = false
    warp_on_change_workspace = 0
    warp_on_toggle_special = 0
    default_monitor = HDMI-A-5
    zoom_factor = 1.0
    zoom_rigid = false
    zoom_detached_camera = true
    enable_hyprcursor = true
    hide_on_key_press = true
    hide_on_touch = true
    hide_on_tablet = false
    use_cpu_buffer = 2
    warp_back_after_non_mouse_input = true
    zoom_disable_aa = false
}

ecosystem {
    # TODO: review this config
    no_update_news = true
    no_donation_nag = true
    enforce_permissions = false
}

quirks {
    # TODO: review this config
    prefer_hdr = 0
}

debug {
    # TODO: review this config
    overlay = false
    disable_logs = true
    disable_time = true
    error_limit = 5
    error_position = 1
}


#### Autostart
# TODO: add PREF tags
# TODO: review this config
exec-once = wl-clip-persist --clipboard regular
# TODO: move clipboard history to quickshell
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = systemctl --user start hyprpolkitagent

exec-once = quickshell
# TODO: move notification server into quickshell
exec-once = dunst

#### Layouts
# TODO: add PREF tags
# TODO: review this config
# TODO: review these layouts
dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_status = master
}

#### Env vars
# TODO: add PREF tags
# TODO: review this config
# TODO: review these, and potentially needed vars
env = XCURSOR_SIZE, 24
env = HYPRCURSOR_SIZE, 24

#### Keybinds
# TODO: add PREF tags
# TODO: review this config
# TODO: add switches for laptop lid events

# TODO: move clipboard history to quickshell
bind = SUPER, V, exec, cliphist list | dmenu | cliphist decode | wl-copy

bind = SUPER&CTRL, V, exec, $systemStatus

bind = SUPER&SHIFT&CTRL&ALT, Z, exec, systemctl sleep
bind = SUPER&SHIFT&CTRL&ALT, X, exec, systemctl hibernate
bind = SUPER&SHIFT&CTRL&ALT, C, exec, hyprshutdown -t 'Restarting...' --post-cmd 'systemctl reboot'
bind = SUPER&SHIFT&CTRL&ALT, V, exec, hyprshutdown -t 'Shutting down...' --post-cmd 'systemctl poweroff'
bind = SUPER&SHIFT&CTRL&ALT, B, exec, hyprshutdown -t 'Logging out...'

bind = SUPER&ALT, Z, exec, hyprshot --mode region --freeze --output-folder ~/Screenshots
bind = SUPER&ALT, X, exec, hyprshot --mode window --freeze --output-folder ~/Screenshots
bind = SUPER&ALT, C, exec, hyprshot --mode output --freeze --output-folder ~/Screenshots
bind = SUPER&ALT, V, exec, hyprpicker --autocopy --no-fancy --lowercase-hex --format=hex

# TODO: move these to a custom config file
bind = SUPER, O, exec, kitty -e ~/projects/source.sh
bind = SUPER, R, exec, kitty -e ~/scripts/todo.sh

# TODO: add taskbar toggle to quickshell

bind = SUPER, N, exec, $terminal
bind = SUPER, M, exec, $webBrowser
bind = SUPER, V, exec, $fileManager

# TODO: add player controls in quickshell
#bindl = , XF86AudioPlay, exec, play
#bindl = , XF86AudioStop, exec, pause
#bindl = , XF86AudioNext, exec, next
#bindl = , XF86AudioPrev, exec, previous
#bindl = SUPER, D, exec, play-pause
#bindl = SUPER, A, exec, play
#bindl = SUPER, S, exec, pause
#bindl = SUPER, W, exec, next
#bindl = SUPER, Q, exec, previous
# TODO: move audio controls to quickshell
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-

# TODO: move brightness controls to quickshell
bindle = SUPER&CTRL, E, exec, brightnessctl -e s 10%+
bindle = SUPER&CTRL, R, exec, brightnessctl -e s 10%-

# TODO: move sunsetting to quickshell
bind = SUPER&CTRL, S, exec, pkill hyprsunset || hyprsunset -t 3000

#### Window Management
# TODO: add PREF tags
# TODO: review this config
# TODO: move app launcher to quickshell
bind = SUPER, B, exec, pkill rofi || rofi -i -show drun
bind = SUPER, C, killactive,
bind = SUPER&CTRL, C, forcekillactive,

bindm = SUPER, mouse:272, movewindow # LMB
bindm = SUPER, mouse:273, resizewindow # RMB
bind = SUPER, T, togglesplit

bind = SUPER, F, fullscreen,
bind = SUPER, D, togglefloating,

# Move focus
bind = SUPER, H, movefocus, l
bind = SUPER, L, movefocus, r
bind = SUPER, K, movefocus, u
bind = SUPER, J, movefocus, d

# Move focused window
bind = SUPER&SHIFT, H, movewindow, l
bind = SUPER&SHIFT, L, movewindow, r
bind = SUPER&SHIFT, K, movewindow, u
bind = SUPER&SHIFT, J, movewindow, d

# Resize focused window
binde = SUPER&ALT, H, resizeactive, -10 0
binde = SUPER&ALT, L, resizeactive, 10 0
binde = SUPER&ALT, J, resizeactive, 0 -10
binde = SUPER&ALT, K, resizeactive, 0 10

# Switch workspaces
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10
binde = SUPER, TAB, workspace, +1 # Next workspace
binde = SUPER&SHIFT, TAB, workspace, -1 # Previous workspace

# Move active window to a workspace
bind = SUPER&SHIFT, 1, movetoworkspace, 1
bind = SUPER&SHIFT, 2, movetoworkspace, 2
bind = SUPER&SHIFT, 3, movetoworkspace, 3
bind = SUPER&SHIFT, 4, movetoworkspace, 4
bind = SUPER&SHIFT, 5, movetoworkspace, 5
bind = SUPER&SHIFT, 6, movetoworkspace, 6
bind = SUPER&SHIFT, 7, movetoworkspace, 7
bind = SUPER&SHIFT, 8, movetoworkspace, 8
bind = SUPER&SHIFT, 9, movetoworkspace, 9
bind = SUPER&SHIFT, 0, movetoworkspace, 10

#### Monitors
# TODO: add PREF tags
# TODO: review this config
# TODO: move this to a custom config file
monitor = HDMI-A-5, 1920x1080@60, 0x0, 1
monitor = HDMI-A-6, 1920x1080@60, 1920x0, 1
monitor = , preferred, auto, 1

#### Window Rules
# TODO: add PREF tags
# TODO: review this config
# TODO: fix these
#windowrule = suppressevent maximize, class:.*
#windowrule = nofocus, class:^$, title: ^$, xwayland:1, floating:1, fullscreen:0, pinned:0

#### Workspace Rules
# TODO: add PREF tags
workspace = 1, monitor:HDMI-A-5
workspace = 2, monitor:HDMI-A-5
workspace = 3, monitor:HDMI-A-5

workspace = 4, monitor:HDMI-A-6
workspace = 5, monitor:HDMI-A-6
workspace = 6, monitor:HDMI-A-6
